var G=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(s,i)=>()=>(s&&(i=s(s=0)),i);var H=(s,i,I,x)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of Y(i))!Z.call(s,l)&&l!==I&&G(s,l,{get:()=>i[l],enumerable:!(x=Q(i,l))||x.enumerable});return s},X=(s,i,I)=>(H(s,i,"default"),I&&H(I,i,"default"));var ne=s=>H(G({},"__esModule",{value:!0}),s);var L={};import*as bn from"async_hooks";var V=ee(()=>{X(L,bn)});import{__getNamedExports as te}from"../../../../__next-on-pages-dist__/webpack/ac7e0cd817c0f96ac6506045b651299a.js";import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/webpack/7528.js";import{__getNamedExports as re}from"../../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as ae}from"../../../../__next-on-pages-dist__/webpack/841752b73933acd57f0d034e25bbec96.js";import{__getNamedExports as oe}from"../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var g=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/auth/register"),t=te(g,g,g),se=t.__chunk_6195,ce=t.__chunk_2067,ue=t.__chunk_9182,ie=t.__chunk_8983,de=t.__chunk_5228,ge=t.__chunk_2296,he=t.__chunk_2594,pe=t.__chunk_6735,ke=t.__chunk_8219,xe=t.__chunk_5577,le=t.__chunk_9254,me=t.__chunk_9206,fe=t.__chunk_989,be=t.__chunk_1863,ye=t.__chunk_3039,ve=t.__chunk_335,Ee=t.__chunk_8042,Re=t.__chunk_7765,$e=t.__chunk_6991,Pe=t.__chunk_8816,we=t.__chunk_6631,Ne=t.__chunk_4828,Oe=t.__chunk_4834,Se=t.__chunk_828,Te=t.__chunk_5927,Ae=t.__chunk_8439,je=t.__chunk_4363,Ce=t.__chunk_2039,Ie=t.__chunk_8264,Ke=t.__chunk_1583,Me=t.__chunk_7908,Fe=t.__chunk_8949,Le=t.__chunk_796,Ue=t.__chunk_1651,De=t.__chunk_5105,qe=t.__chunk_9642,Be=t.__chunk_5028,He=t.__chunk_9548,Xe=t.__chunk_6914,We=t.__chunk_7960,Ge=t.__chunk_4337,Ve=t.__chunk_8819,ze=_e(g,g,g),Je=ze.__chunk_7528,z=re(g,g,g),Qe=z.__chunk_9985,Ye=z.__chunk_4155,h=ae(g,g,g),Ze=h.__chunk_1730,en=h.__chunk_3818,nn=h.__chunk_7037,tn=h.__chunk_9573,_n=h.__chunk_7701,rn=h.__chunk_662,an=h.__chunk_4101,on=h.__chunk_6776,sn=h.__chunk_3665,cn=h.__chunk_7444,un=h.__chunk_4591,dn=h.__chunk_7983,gn=h.__chunk_5234,hn=h.__chunk_2561,pn=h.__chunk_2988,kn=h.__chunk_5996,xn=h.__chunk_676,J=oe(g,g,g),ln=J.__NEXT_FONT_MANIFEST,mn=J.__REACT_LOADABLE_MANIFEST,Pn=((s,i,I)=>(i._ENTRIES={},s.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-345df78362f7afca.js","static/chunks/fd9d1056-76a4a06e4cad8499.js","static/chunks/30-8cde92f59af3217f.js","static/chunks/main-app-7762fbaf79fbc5f3.js"],pages:{"/_app":["static/chunks/webpack-345df78362f7afca.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-54d8bce3c6875e10.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-345df78362f7afca.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-54d8bce3c6875e10.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},s.__BUILD_MANIFEST.lowPriorityFiles=["/static/_bVfOgkvKtK0yec9nEOT6/_buildManifest.js",,"/static/_bVfOgkvKtK0yec9nEOT6/_ssgManifest.js"],s.__REACT_LOADABLE_MANIFEST=mn,s.__NEXT_FONT_MANIFEST=ln,s.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var x={},l={};function r(n){var u=l[n];if(u!==void 0)return u.exports;var c=l[n]={exports:{}},m=!0;try{x[n](c,c.exports,r),m=!1}finally{m&&delete l[n]}return c.exports}r.m=x,r.amdO={},(()=>{var n=[];r.O=(u,c,m,f)=>{if(c){f=f||0;for(var d=n.length;d>0&&n[d-1][2]>f;d--)n[d]=n[d-1];n[d]=[c,m,f];return}for(var p=1/0,d=0;d<n.length;d++){for(var[c,m,f]=n[d],b=!0,y=0;y<c.length;y++)p>=f&&Object.keys(r.O).every(T=>r.O[T](c[y]))?c.splice(y--,1):(b=!1,f<p&&(p=f));if(b){n.splice(d--,1);var $=m();$!==void 0&&(u=$)}}return u}})(),r.n=n=>{var u=n&&n.__esModule?()=>n.default:()=>n;return r.d(u,{a:u}),u},r.d=(n,u)=>{for(var c in u)r.o(u,c)&&!r.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:u[c]})},r.e=()=>Promise.resolve(),r.g=function(){if(typeof i=="object")return i;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(n,u)=>Object.prototype.hasOwnProperty.call(n,u),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={993:0};r.O.j=m=>n[m]===0;var u=(m,f)=>{var d,p,[b,y,$]=f,O=0;if(b.some(K=>n[K]!==0)){for(d in y)r.o(y,d)&&(r.m[d]=y[d]);if($)var S=$(r)}for(m&&m(f);O<b.length;O++)p=b[O],r.o(n,p)&&n[p]&&n[p][0](),n[p]=0;return r.O(S)},c=s.webpackChunk_N_E=s.webpackChunk_N_E||[];c.forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c))})()})(),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[720],{8819:Ve,4337:Ge,7960:We,6914:Xe,9548:He,5028:Be,9642:qe,5105:De,1651:Ue,796:Le,8949:Fe,7908:Me,1583:Ke,8264:Ie,2039:Ce,4363:je,8439:Ae,5927:Te,828:Se,4834:Oe,4828:Ne,6631:we,8816:Pe,6991:$e,7765:Re,8042:Ee,335:ve,3039:ye,1863:be,989:fe,9206:me,9254:le,5577:xe,8219:ke,6735:pe,2594:he,2296:ge,5228:de,8983:ie,9182:ue}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[883],{676:xn,5996:kn,2988:pn,2561:hn,5234:gn,7983:dn,4591:un,7444:cn,3665:sn,6776:on,4101:an,662:rn,7701:_n,9573:tn,7037:nn,3818:en,1730:Ze}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[829],{4155:Ye,9985:Qe,7528:Je}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[2],{2067:ce,6195:se,9996:(x,l,r)=>{"use strict";r.r(l),r.d(l,{ComponentMod:()=>q,default:()=>B});var n={};r.r(n),r.d(n,{POST:()=>O,runtime:()=>y});var u={};r.r(u),r.d(u,{originalPathname:()=>U,patchFetch:()=>D,requestAsyncStorage:()=>K,routeModule:()=>S,serverHooks:()=>T,staticGenerationAsyncStorage:()=>C});var c=r(7983),m=r(2561),f=r(4828),d=r(6631),p=r(9985),b=r(7528);let y="edge";async function $(M){let w=new TextEncoder().encode(M);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",w))).map(v=>v.toString(16).padStart(2,"0")).join("")}async function O(M){try{let{name:w,email:v,password:F,phone:R}=await M.json();if(!w||!v||!F)return p.xk.json({success:!1,message:"Name, email, and password are required"},{status:400});let e=w.trim().split(" "),o=e[0],a=e.length>1?e.slice(1).join(" "):"";if(await b.db.prepare("SELECT id FROM users WHERE email = ?").bind(v).first())return p.xk.json({success:!1,message:"User with this email already exists"},{status:409});let _=await $(F),E=await b.db.prepare(`
        INSERT INTO users (first_name, last_name, email, password_hash, phone, role_id, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
      `).bind(o,a,v,_,R||null,2).run(),k=E.meta?.last_row_id;return k==null&&console.warn("Could not determine last inserted row ID from D1 meta."),p.xk.json({success:!0,message:"User registered successfully",data:{id:k}},{status:201})}catch(w){return console.error("Error registering user:",w),p.xk.json({success:!1,message:"An internal server error occurred during registration."},{status:500})}}let S=new m.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/home/chandra/reach_andaman/andaman-explorer-final/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:K,staticGenerationAsyncStorage:C,serverHooks:T}=S,U="/api/auth/register/route";function D(){return(0,d.XH)({serverHooks:T,staticGenerationAsyncStorage:C})}let q=u,B=c.a.wrap(S)}},x=>{var l=n=>x(x.s=n);x.O(0,[720,883,829],()=>l(9996));var r=x.O();(i._ENTRIES=typeof i._ENTRIES>"u"?{}:i._ENTRIES)["middleware_app/api/auth/register/route"]=r}]),function(){let x={exports:{},loaded:!1};return function(r,n){var u=Object.create,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,b=e=>c(e,"__esModule",{value:!0}),y=(e,o)=>{b(e);for(var a in o)c(e,a,{get:o[a],enumerable:!0})},$=(e,o,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let _ of f(o))!p.call(e,_)&&_!=="default"&&c(e,_,{get:()=>o[_],enumerable:!(a=m(o,_))||a.enumerable});return e},O=e=>$(b(c(e!=null?u(d(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);y(n,{default:()=>w});var S=O((V(),ne(L))),K="@next/request-context",C=Symbol.for(K),T=Symbol.for("internal.storage");function U(){let e=i;if(!e[C]){let o=new S.AsyncLocalStorage,a={get:()=>o.getStore(),[T]:o};e[C]=a}return e[C]}var D=U();function q(e,o){return D[T].run(e,o)}function B(e){let o={};return e&&e.forEach((a,_)=>{o[_]=a,_.toLowerCase()==="set-cookie"&&(o[_]=M(a))}),o}function M(e){let o=[],a=0,_,E,k,A,j;function P(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}function N(){return E=e.charAt(a),E!=="="&&E!==";"&&E!==","}for(;a<e.length;){for(_=a,j=!1;P();)if(E=e.charAt(a),E===","){for(k=a,a+=1,P(),A=a;a<e.length&&N();)a+=1;a<e.length&&e.charAt(a)==="="?(j=!0,a=A,o.push(e.substring(_,k)),_=a):a=k+1}else a+=1;(!j||a>=e.length)&&o.push(e.substring(_,e.length))}return o}function w(e){let o=e.staticRoutes.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page})),a=e.dynamicRoutes?.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page}))||[];return async function(_,E){let k=new URL(_.url).pathname,A={};if(e.nextConfig?.basePath&&k.startsWith(e.nextConfig.basePath)&&(k=k.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let P of e.nextConfig.i18n.locales){let N=new RegExp(`^/${P}($|/)`,"i");if(k.match(N)){k=k.replace(N,"/")||"/";break}}for(let P of o)if(P.regexp.exec(k)){A.name=P.page;break}if(!A.name){let P=F(k);for(let N of a||[]){if(P&&!F(N.page))continue;let W=N.regexp.exec(k);if(W){A={name:N.page,params:W.groups};break}}}let j=await q({waitUntil:E.waitUntil},()=>i._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:_.url,method:_.method,headers:B(_.headers),ip:v(_.headers,R.Ip),geo:{city:v(_.headers,R.City,!0),country:v(_.headers,R.Country,!0),latitude:v(_.headers,R.Latitude),longitude:v(_.headers,R.Longitude),region:v(_.headers,R.Region,!0)},nextConfig:e.nextConfig,page:A,body:_.body}}));return j.waitUntil&&E.waitUntil(j.waitUntil),j.response}}function v(e,o,a=!1){let _=e.get(o)||void 0;return a&&_?decodeURIComponent(_):_}function F(e){return e==="/api"||e.startsWith("/api/")}var R;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(R||(R={}))}(x,x.exports),x.exports}.call({}).default({name:"app/api/auth/register/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/activities",regex:"^/activities(?:/)?$",routeKeys:{},namedRegex:"^/activities(?:/)?$"},{page:"/auth/signin",regex:"^/auth/signin(?:/)?$",routeKeys:{},namedRegex:"^/auth/signin(?:/)?$"},{page:"/auth/signup",regex:"^/auth/signup(?:/)?$",routeKeys:{},namedRegex:"^/auth/signup(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/destinations",regex:"^/destinations(?:/)?$",routeKeys:{},namedRegex:"^/destinations(?:/)?$"},{page:"/favicon.ico",regex:"^/favicon\\.ico(?:/)?$",routeKeys:{},namedRegex:"^/favicon\\.ico(?:/)?$"},{page:"/packages",regex:"^/packages(?:/)?$",routeKeys:{},namedRegex:"^/packages(?:/)?$"},{page:"/search",regex:"^/search(?:/)?$",routeKeys:{},namedRegex:"^/search(?:/)?$"},{page:"/search-results",regex:"^/search\\-results(?:/)?$",routeKeys:{},namedRegex:"^/search\\-results(?:/)?$"},{page:"/user/bookings",regex:"^/user/bookings(?:/)?$",routeKeys:{},namedRegex:"^/user/bookings(?:/)?$"},{page:"/user/dashboard",regex:"^/user/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/user/dashboard(?:/)?$"},{page:"/vendor/bookings",regex:"^/vendor/bookings(?:/)?$",routeKeys:{},namedRegex:"^/vendor/bookings(?:/)?$"},{page:"/vendor/dashboard",regex:"^/vendor/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/vendor/dashboard(?:/)?$"},{page:"/vendor/login",regex:"^/vendor/login(?:/)?$",routeKeys:{},namedRegex:"^/vendor/login(?:/)?$"},{page:"/vendor/register",regex:"^/vendor/register(?:/)?$",routeKeys:{},namedRegex:"^/vendor/register(?:/)?$"},{page:"/vendor/services",regex:"^/vendor/services(?:/)?$",routeKeys:{},namedRegex:"^/vendor/services(?:/)?$"},{page:"/vendors",regex:"^/vendors(?:/)?$",routeKeys:{},namedRegex:"^/vendors(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/bookings/[id]",regex:"^/api/bookings/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/bookings/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/destinations/[id]",regex:"^/api/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/packages/[id]",regex:"^/api/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/vendors/[id]",regex:"^/api/vendors/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/vendors/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/confirmation/[id]",regex:"^/bookings/confirmation/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/confirmation/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/payment/[id]",regex:"^/bookings/payment/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/payment/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/destinations/[id]",regex:"^/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]",regex:"^/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]/book",regex:"^/packages/([^/]+?)/book(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)/book(?:/)?$"}],nextConfig:{basePath:""}})))(g,g,g);export{Pn as default};
