(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{8578:function(e,s,a){Promise.resolve().then(a.bind(a,3990))},5863:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},3990:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(7437),l=a(2265),r=a(9376),i=a(7648),n=a(8703),c=a(5863);function d(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(o,{}),children:(0,t.jsx)(m,{})})}let o=()=>(0,t.jsxs)("div",{className:"flex justify-center items-center py-20",children:[(0,t.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-lg",children:"Loading..."})]});function m(){let e=(0,r.useSearchParams)(),s=e.get("q")||"",a=e.get("destination")||"",n=e.get("dates")||"",c=e.get("travelers")||"",[d,m]=(0,l.useState)(!0),[h,x]=(0,l.useState)({destinations:[],packages:[],activities:[]}),[g,p]=(0,l.useState)(null),b={destinations:[{id:"havelock-island",name:"Havelock Island (Sample)",description:"Sample description.",image_url:"/images/havelock.jpg",location:"Andaman Islands",category:"destination"}],packages:[{id:101,name:"Andaman Explorer (Sample)",description:"Sample package.",image_url:"/images/placeholder.jpg",price:35e3,duration:"7 days",category:"package"}],activities:[{id:201,name:"Scuba Diving (Sample)",description:"Sample activity.",image_url:"/images/scuba.jpg",price:4500,duration:"3 hours",category:"activity"}]};(0,l.useEffect)(()=>{(async()=>{m(!0),p(null);try{let e=new URLSearchParams;s&&e.set("q",s),a&&e.set("destination",a),n&&e.set("dates",n),c&&e.set("travelers",c),console.log("Fetching search results for: /api/search?".concat(e.toString()));let t=await fetch("/api/search?".concat(e.toString())),l=await t.json();if(console.log("API Response Data:",l),!t.ok){let e=(null==l?void 0:l.message)||"HTTP error! Status: ".concat(t.status);throw console.error("API HTTP Error:",e,l),Error(e)}if(l&&!0===l.success&&"object"==typeof l.data&&null!==l.data&&Array.isArray(l.data.destinations)&&Array.isArray(l.data.packages)&&Array.isArray(l.data.activities))console.log("API Success Response Data:",l.data),x(l.data),0===l.data.destinations.length&&0===l.data.packages.length&&0===l.data.activities.length&&console.log("API returned success but no results found.");else{let e=(null==l?void 0:l.message)||"Received invalid data structure from API.";throw console.error("API Logic Error or Invalid Structure:",e,l),Error(e)}}catch(e){console.error("Error fetching search results:",e),p(e instanceof Error?e.message:"An unknown error occurred during search."),x(b)}finally{m(!1)}})()},[s,a,n,c]);let j=h.destinations.length>0||h.packages.length>0||h.activities.length>0;return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Search Results"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[s&&(0,t.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:['"',s,'"']}),a&&(0,t.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full",children:["Destination: ",a]}),n&&(0,t.jsxs)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full",children:["Dates: ",n]}),c&&(0,t.jsxs)("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full",children:["Travelers: ",c]})]})]}),d?(0,t.jsx)(o,{}):g?(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"p-4 mb-6 rounded-md bg-red-50 text-red-700 border border-red-200",children:[(0,t.jsx)("h3",{className:"font-medium",children:"Search Error"}),(0,t.jsx)("p",{children:g}),(0,t.jsx)("p",{className:"mt-2 text-sm",children:"Displaying sample results instead."})]}),(0,t.jsx)(u,{results:h})]}):j?(0,t.jsx)(u,{results:h}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"No results found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search criteria or explore our popular destinations below."}),(0,t.jsx)(i.default,{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:" Back to Home "})]})]})}let u=e=>{let{results:s}=e;return s.destinations.length>0||s.packages.length>0||s.activities.length>0?(0,t.jsxs)("div",{className:"space-y-12",children:[s.destinations.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Destinations"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.destinations.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-48 relative",children:[" ",(0,t.jsx)(n.default,{src:e.image_url||"/images/placeholder.jpg",alt:e.name,fill:!0,className:"object-cover"})," "]}),(0,t.jsxs)("div",{className:"p-6",children:[" ",(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.location})," ",(0,t.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:e.description})," ",(0,t.jsx)(i.default,{href:"/destinations/".concat(e.id),className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:" Explore "})," "]})]},"dest-".concat(e.id)))})]}),s.packages.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Travel Packages"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.packages.map(e=>{var s;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-48 relative",children:[" ",(0,t.jsx)(n.default,{src:e.image_url||"/images/placeholder.jpg",alt:e.name,fill:!0,className:"object-cover"})," "]}),(0,t.jsxs)("div",{className:"p-6",children:[" ",(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.duration})," ",(0,t.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-3",children:e.description})," ",(0,t.jsxs)("p",{className:"text-lg font-bold text-blue-600 mb-4",children:["₹",null===(s=e.price)||void 0===s?void 0:s.toLocaleString()]})," ",(0,t.jsx)(i.default,{href:"/packages/".concat(e.id),className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:" View Details "})," "]})]},"pkg-".concat(e.id))})})]}),s.activities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Activities"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.activities.map(e=>{var s;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-48 relative",children:[" ",(0,t.jsx)(n.default,{src:e.image_url||"/images/placeholder.jpg",alt:e.name,fill:!0,className:"object-cover"})," "]}),(0,t.jsxs)("div",{className:"p-6",children:[" ",(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.duration})," ",(0,t.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-3",children:e.description})," ",(0,t.jsxs)("p",{className:"text-lg font-bold text-blue-600 mb-4",children:["₹",null===(s=e.price)||void 0===s?void 0:s.toLocaleString()]})," ",(0,t.jsx)(i.default,{href:"/activities/".concat(e.id),className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:" Book Now "})," "]})]},"act-".concat(e.id))})})]})]}):(0,t.jsx)("div",{className:"text-center py-10",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No items to display."})})}}},function(e){e.O(0,[451,145,971,30,744],function(){return e(e.s=8578)}),_N_E=e.O()}]);